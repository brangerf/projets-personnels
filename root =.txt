root ::= 
    problem_space 
    meta_layer 
    operational_layer 
    feedback_layer 
    synthesis_layer 
    composition_layer
    output_text

# Espace problème
problem_space ::= 
    problem_definition 
    scope_boundaries 
    initial_conditions 
    success_criteria

problem_definition ::= 
    "Problem: " text 
    complexity_assessment 
    domain_tags

scope_boundaries ::= 
    "Scope: " 
    inclusion_criteria+ 
    exclusion_criteria* 
    boundary_conditions

initial_conditions ::= 
    "Initial State: " 
    known_facts+ 
    assumptions* 
    uncertainties*

success_criteria ::= 
    "Success Metrics: " 
    primary_criteria+ 
    secondary_criteria* 
    validation_methods

# Couche méta
meta_layer ::= 
    strategic_planning 
    execution_framework 
    quality_control 
    meta_cognitive_monitoring

strategic_planning ::= 
    approach_selection 
    resource_allocation 
    risk_assessment 
    contingency_plans

execution_framework ::= 
    phase_definition+ 
    milestone_specification* 
    dependency_mapping 
    progress_metrics

quality_control ::= 
    validation_criteria 
    verification_methods 
    error_detection_protocols 
    correction_procedures

meta_cognitive_monitoring ::= 
    bias_detection 
    assumption_tracking 
    uncertainty_management 
    confidence_calibration

# Couche opérationnelle
operational_layer ::= 
    thought_stream+ 
    relation_network? 
    integration_points*
    thought_organization

thought_organization ::=
    clustering_system
    hierarchy_management
    pattern_recognition
    coherence_optimization

clustering_system ::=
    semantic_clustering
    temporal_clustering
    causal_clustering
    functional_clustering

hierarchy_management ::=
    level_assignment
    abstraction_management
    detail_preservation
    hierarchy_navigation

pattern_recognition ::=
    recurring_patterns
    structural_similarities
    functional_analogies
    emerging_trends

coherence_optimization ::=
    local_coherence
    global_coherence
    transitional_smoothing
    contradiction_resolution

# thought streams
thought_stream ::= 
    stream_header 
    depth_control
    parallel_thoughts 
    convergence_points?
    stream_validation

stream_header ::= 
    "[Stream-" id ": " stream_type "]" 
    stream_purpose 
    expected_outcomes

stream_type ::= 
    "MainStream" | 
    "Alternative" | 
    "Devil's Advocate" | 
    "Optimization" | 
    "Innovation" | 
    "Exploration" | 
    "Validation"

depth_control ::=
    complexity_assessment
    minimum_depth_requirement
    exploration_breadth
    validation_checkpoints

complexity_assessment ::=
    "Complexity: " ("Simple" | "Moderate" | "Complex" | "Very Complex")
    complexity_justification
    required_techniques+
    risk_factors*

minimum_depth_requirement ::=
    min_thought_units
    min_exploration_branches
    min_validation_steps
    min_technique_applications

parallel_thoughts ::= 
    technique_application+
    thought_unit+
    technique_validation

technique_application ::=
    "[Technique-" id ": " technique_name "]"
    technique_purpose
    implementation_steps+
    expected_outcomes
    actual_outcomes
    deviation_analysis?

implementation_steps ::=
    step_number ". " implementation_detail
    completion_status
    output_validation

technique_validation ::=
    effectiveness_assessment
    improvement_suggestions
    alternative_techniques?

thought_unit ::= 
    "[" unit_id "]" 
    cognitive_operation 
    rigor_control
    metadata_block 
    quality_markers
    self_criticism

rigor_control ::=
    assumption_tracking
    bias_detection
    complexity_handling
    uncertainty_management

self_criticism ::=
    weakness_identification
    alternative_perspectives+
    improvement_opportunities
    revision_history?

cognitive_operation ::= 
    (perception | reasoning | exploration | synthesis | 
     evaluation | creation | intuition | critique | 
     integration | abstraction | analogy | transformation |
     error_detection | assumption_challenge | 
     counter_argument | depth_increase | 
     technique_application | validation_check)

metadata_block ::= 
    dependency_chain? 
    confidence_metrics 
    verification_status 
    weight_assessment?

quality_markers ::=
    depth_assessment
    rigor_score
    technique_coverage
    validation_completeness

# Types de pensée spécifiques
perception ::= "Perceive: " text
reasoning ::= "Reason: " text
exploration ::= "Explore: " text
synthesis ::= "Synthesize: " text
evaluation ::= "Evaluate: " text
creation ::= "Create: " text
intuition ::= "Intuit: " text confidence_markers
critique ::= "Critique: " text counter_arguments?
integration ::= "Integrate: " text synthesis_method
abstraction ::= "Abstract: " text abstraction_level
analogy ::= "Analogize: " text similarity_mapping
transformation ::= "Transform: " text transformation_type
error_detection ::= "Detect Error: " text error_type
assumption_challenge ::= "Challenge Assumption: " text evidence
counter_argument ::= "Counter: " text argument_strength
depth_increase ::= "Deepen: " text depth_strategy
validation_check ::= "Validate: " text validation_criteria

# Réseau de relations
relation_network ::= 
    relation+ 
    network_properties 
    emergent_patterns?

relation ::= 
    source_id 
    relation_type 
    target_id 
    relation_strength 
    bidirectional? 
    context_dependency?

relation_type ::= 
    "supports" | "contradicts" | "expands" | 
    "qualifies" | "generalizes" | "specializes" | 
    "analogizes" | "transforms" | "enables" | 
    "inhibits" | "catalyzes" | "moderates"

# Couche de feedback avec système d'auto-correction et d'apprentissage enrichi
feedback_layer ::= 
    monitoring_system 
    error_handling 
    refinement_loops 
    learning_integration
    learning_system
    self_correction

monitoring_system ::= 
    consistency_check 
    completeness_check 
    coherence_check 
    bias_detection 
    assumption_validation

error_handling ::= 
    error_detection 
    error_classification 
    correction_strategy 
    implementation 
    verification

refinement_loops ::= 
    iteration_marker 
    improvement_focus 
    delta_analysis 
    convergence_check

learning_integration ::= 
    pattern_recognition 
    knowledge_synthesis 
    methodology_refinement 
    insight_capture

# Système d'apprentissage
learning_system ::=
    pattern_recognition_system
    knowledge_integration
    belief_updating
    model_refinement
    hypothesis_generation
    contradiction_resolution

pattern_recognition_system ::=
    pattern_identification
    pattern_validation
    pattern_categorization
    pattern_application

knowledge_integration ::=
    new_knowledge_assessment
    existing_knowledge_mapping
    knowledge_fusion
    integration_validation

belief_updating ::=
    evidence_assessment
    belief_strength_calculation
    update_propagation
    consistency_verification

model_refinement ::=
    model_evaluation
    refinement_identification
    refinement_implementation
    performance_validation

hypothesis_generation ::=
    data_analysis
    pattern_matching
    hypothesis_formulation
    hypothesis_testing

contradiction_resolution ::=
    contradiction_detection
    source_analysis
    resolution_strategy
    implementation_plan

# Système d'auto-correction
self_correction ::=
    error_detection_system
    bias_identification_system
    assumption_validation_system
    logical_verification_system
    consistency_checking_system
    automated_refinement_system

error_detection_system ::=
    error_pattern_matching
    anomaly_detection
    logic_verification
    completeness_checking

bias_identification_system ::=
    cognitive_bias_detection
    statistical_bias_analysis
    contextual_bias_assessment
    bias_impact_evaluation

assumption_validation_system ::=
    assumption_identification
    validity_testing
    impact_assessment
    adjustment_recommendation

logical_verification_system ::=
    logic_rule_checking
    inference_validation
    contradiction_detection
    coherence_verification

consistency_checking_system ::=
    internal_consistency_check
    external_consistency_check
    temporal_consistency_check
    semantic_consistency_check

automated_refinement_system ::=
    refinement_trigger_detection
    improvement_identification
    change_implementation
    result_validation

# Système de gestion de la complexité systémique
complexity_management ::=
    dimensional_analysis_system
    scale_interactions_system
    emergence_tracking_system
    chaos_boundary_detection
    stability_assessment_system
    complexity_reduction_system
    information_compression_system

dimensional_analysis_system ::=
    dimension_identification
    dimensional_relationship_mapping
    scaling_laws_analysis
    dimensional_consistency_check

scale_interactions_system ::=
    scale_identification
    cross_scale_analysis
    interaction_mapping
    scale_bridge_mechanisms

emergence_tracking_system ::=
    pattern_monitoring
    emergence_detection
    causality_analysis
    prediction_modeling

chaos_boundary_detection ::=
    stability_analysis
    sensitivity_testing
    bifurcation_mapping
    attractor_identification

stability_assessment_system ::=
    equilibrium_analysis
    perturbation_testing
    recovery_evaluation
    stability_metrics

complexity_reduction_system ::=
    abstraction_mechanism
    simplification_strategy
    essential_feature_extraction
    reduced_model_validation

information_compression_system ::=
    redundancy_identification
    pattern_encoding
    lossy_compression_strategy
    compression_quality_assessment

systemic_thinking ::=
    network_effects_analysis
    feedback_loop_mapping
    delayed_consequence_tracking
    ripple_effect_modeling
    butterfly_effect_analysis
    tipping_point_identification

network_effects_analysis ::=
    node_identification
    connection_mapping
    effect_propagation
    network_dynamics

feedback_loop_mapping ::=
    loop_identification
    loop_classification
    interaction_analysis
    stability_assessment

delayed_consequence_tracking ::=
    delay_identification
    impact_projection
    timeline_mapping
    intervention_planning

ripple_effect_modeling ::=
    initial_impact_assessment
    propagation_mapping
    consequence_chains
    boundary_definition

butterfly_effect_analysis ::=
    sensitivity_mapping
    cascade_modeling
    uncertainty_propagation
    impact_scenarios

tipping_point_identification ::=
    threshold_analysis
    early_warning_indicators
    transition_modeling
    intervention_points

# Couche de synthèse
synthesis_layer ::= 
    conclusion_framework 
    implication_analysis 
    future_directions 
    meta_evaluation

conclusion_framework ::= 
    main_conclusions 
    supporting_evidence 
    limitation_acknowledgment 
    confidence_assessment

implication_analysis ::= 
    direct_implications 
    indirect_implications 
    temporal_implications 
    systemic_implications

temporal_implications ::= 
    short_term 
    medium_term 
    long_term 
    evolutionary_patterns

systemic_implications ::= 
    local_impact 
    global_impact 
    feedback_loops 
    emergent_properties

# Couche de composition
composition_layer ::= 
    discourse_planning 
    narrative_architecture 
    rhetorical_framework 
    textual_engineering

discourse_planning ::= 
    audience_analysis 
    purpose_definition 
    scope_adaptation 
    complexity_calibration

audience_analysis ::= 
    target_audience 
    knowledge_level 
    expectations 
    constraints

purpose_definition ::= 
    communication_goals+ 
    learning_objectives* 
    desired_impacts 
    success_metrics

narrative_architecture ::= 
    structural_components 
    flow_design 
    emphasis_patterns

structural_components ::= 
    introduction_framework 
    development_framework 
    conclusion_framework 
    transitions_framework

introduction_framework ::= 
    hook_element 
    context_element 
    thesis_element 
    roadmap_element

development_framework ::= 
    major_sections+ 
    subsections* 
    progressive_buildup 
    logical_chain

rhetorical_framework ::= 
    style_selection 
    tone_management 
    persuasion_strategies 
    clarity_mechanisms

style_selection ::= 
    register_choice 
    vocabulary_level 
    sentence_complexity 
    rhythm_patterns

tone_management ::= 
    formality_level 
    engagement_degree 
    authority_markers 
    accessibility_balance

textual_engineering ::= 
    paragraph_architecture 
    transition_system 
    coherence_framework 
    style_implementation

paragraph_architecture ::= 
    topic_sentence 
    supporting_elements+ 
    internal_transitions 
    closing_element
    unity_checks

transition_system ::= 
    inter_paragraph_links 
    section_bridges 
    conceptual_connections 
    flow_smoothing

coherence_framework ::= 
    argument_progression 
    idea_linking 
    reference_management 
    consistency_checks

# Texte final
output_text ::= 
    final_document 
    quality_metrics 
    readability_score

final_document ::= 
    "Final Text: \n\n" 
    formatted_text 
    structure_markers? 
    style_indicators?

formatted_text ::= 
    section+ 
    formatting_elements*

section ::= 
    section_header? 
    paragraphs+

paragraphs ::= 
    paragraph_header? 
    text 
    paragraph_closer?

# Éléments de support pour la composition
formatting_elements ::= 
    emphasis_markers 
    structure_indicators 
    readability_enhancers

emphasis_markers ::= 
    "*" text "*" | 
    "**" text "**" | 
    "_" text "_"

structure_indicators ::= 
    section_breaks | 
    paragraph_breaks | 
    transition_markers

readability_enhancers ::= 
    white_space_management | 
    list_formatting | 
    quote_formatting

# Éléments spécifiques au style académique
academic_elements ::= 
    citation_system 
    reference_framework 
    terminology_management 
    argumentation_patterns

citation_system ::= 
    in_text_citation 
    reference_marker 
    footnote_element

argumentation_patterns ::= 
    claim_structure 
    evidence_presentation 
    counterargument_handling 
    synthesis_building

# Métriques de qualité
quality_metrics ::= 
    coherence_score 
    clarity_score 
    engagement_score 
    academic_rigor_score

readability_score ::= 
    complexity_measure 
    accessibility_index 
    flow_measure 
    engagement_index

# Système de validation final
validation_checks ::= 
    coherence_verification 
    completeness_check 
    style_consistency 
    academic_standards

# Éléments de base et utilitaires
verification_type ::= 
    "Direct" | "Indirect" | "Axiom" | 
    "Empirical" | "Logical" | "Creative" | 
    "Statistical" | "Experimental" | "Theoretical"

conflict_status ::= 
    "Conflict: " ("None" | "Partial" | "Major" | "Resolved")

certainty_evolution ::= 
    "Trend: " ("↑" | "↓" | "→")

confidence_markers ::= 
    " [Gut: " ("Strong" | "Mixed" | "Weak") "]"

counter_arguments ::= 
    " [Counter: " text "]"

weight_value ::= [1-5]
weight_justification ::= " (" text ")"

abstraction_level ::= 
    "Concrete" | "Low" | "Medium" | "High" | "Meta"

transformation_type ::= 
    "Structural" | "Functional" | "Conceptual" | "Paradigmatic"

# Nouveaux éléments de base pour thought streams
technique_name ::= text
implementation_detail ::= text
step_number ::= number
completion_status ::= "✓" | "⚠" | "✗"
min_thought_units ::= number
min_exploration_branches ::= number
min_validation_steps ::= number
min_technique_applications ::= number
depth_assessment ::= "Depth: " ("Shallow" | "Moderate" | "Deep" | "Very Deep")
rigor_score ::= [1-10]
technique_coverage ::= percentage
validation_completeness ::= percentage
error_type ::= text
evidence ::= text
argument_strength ::= "Weak" | "Moderate" | "Strong"
depth_strategy ::= text
validation_criteria ::= text
complexity_justification ::= text
effectiveness_assessment ::= text
improvement_suggestions ::= text
weakness_identification ::= text
improvement_opportunities ::= text

# Éléments basiques
text ::= [^\n]+
id ::= [A-Za-z0-9-]+
unit_id ::= number ("." number)*
number ::= [0-9]+
percentage ::= [0-9]+ "%"
section_header ::= "# " text
paragraph_header ::= "## " text
in_text_citation ::= "(" citation_content ")"
citation_content ::= [^)]+